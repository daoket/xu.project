<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="aplus-terminal" content="1">
  <meta name="apple-mobile-web-app-title" content="">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
    
    <meta name="format-detection" content="telephone=no, address=no">
      
  <title>贷款</title>
  <link rel="stylesheet" type="text/css" href="css/main.css"/>
  <!--图标字体-->
  <script src="js/iconfont.js"></script>
</head>
<body>
  <div class="app">
    <div id="content1" class="content content1">
      <img class="qrcode" src="img/qrcode.png"/>
    </div>
    <div id="content2" class="content content2">
      <div class="search">
        <select name="">
          <option value="杭州市">杭州市</option>
          <option value="杭州市">杭州市</option>
          <option value="杭州市">杭州市</option>
          <option value="杭州市">杭州市</option>
        </select>
        <input type="text" placeholder="搜索公司名称"/>
        <svg class="icon" aria-hidden="true" style="color: #EEEEEE;">
			    <use xlink:href="#icon-search"></use>
			  </svg>
      </div>
      <ul class="result">
      	<li>杭州xxx公司</li>
      	<li>杭州xxx公司</li>
      	<li>杭州xxx公司</li>
      </ul>
    </div>
    <div id="content3" class="content content3">
      content3
    </div>
    <div id="content4" class="content content4">
      <div class="head">
        <select class="select1" name="">
          <option value="年榜">年榜</option>
          <option value="年榜">年榜</option>
          <option value="年榜">年榜</option>
        </select>
        <select class="select2" name="">
          <option value="2017年">2017年</option>
          <option value="2017年">2017年</option>
          <option value="2017年">2017年</option>
        </select>
      </div>
      <nav class="nav">
        <table class="userTable" border="0" cellspacing="" cellpadding="">
          <tr class="thead">
            <th>名次</th>
            <th>姓名</th>
            <th>客户数</th>
            <th>奖励</th>
          </tr>
          <tr>
            <td>
              <svg class="icon" aria-hidden="true" style="color: #F6C81E;">
                <use xlink:href="#icon-diyiming"></use>
              </svg>
            </td>
            <td>张三</td>
            <td>439000</td>
            <td>1000元</td>
          </tr>
          <tr>
            <td>
              <svg class="icon" aria-hidden="true" style="color: #C6C6D3;">
                <use xlink:href="#icon-dierming"></use>
              </svg>
            </td>
            <td>张三</td>
            <td>439000</td>
            <td>1000元</td>
          </tr>
          <tr>
            <td>
              <svg class="icon" aria-hidden="true" style="color: #DEC6C4;">
                <use xlink:href="#icon-disanming"></use>
              </svg>
            </td>
            <td>张三</td>
            <td>439000</td>
            <td>1000元</td>
          </tr>
        </table>
      </nav>
    </div>
    <footer class="footer">
      <a class="active" href="#content1">分享</a>
      <a class="" href="#content2">准入<br />查询</a>
      <a href="#content3">积分<br />查询</a>
      <a class="" href="#content4">排行榜</a>
    </footer>
  </div>
  <script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
  <script type="text/javascript">
  	var event = 'ontouchstart' in document.documentElement ? 'touchstart' : 'click';
  	$('.footer>a').on(event, function () {
  	    $(this).addClass('active').siblings().removeClass('active');
    });
    var dataUrl = 'js/data.js'; // 假数据
    // 请求数据
    askData(dataUrl);
    // 滚动加载
    window.onscroll = function () {
      var isBottom = document.body.scrollHeight - document.body.scrollTop - window.innerHeight;
      if (isBottom < 1) {
      	 askData(dataUrl);
      }
    }
    // 异步请求函数
    function askData(url) {
      $.ajax({
        type: "get",
        url: url,
        async: true,
        success: function(res) {
          var data = JSON.parse(res);
          loadTable(data);
        }
      });
    }
    
    function loadTable(data) {
      for(var i in data) {
        var html = '<tr>' +
          '<td>' + (+i + 3) + '</td>' +
          '<td>' + data[i].name + '</td>' +
          '<td>' + data[i].count + '</td>' +
          '<td>' + data[i].reward + '</td>' +
          '</tr>';
        $(html).appendTo('.userTable')
      }
    }
  </script>
</body>
</html>

